function layout(t){"computer"==t&&($("#images").attr("style","width:calc(50% - 16px);float:left;margin-bottom:16px"),$("#info > div:nth-child(2)").attr("style","width:calc(50% - 16px);float:right;margin-bottom:16px"))}function getSources(t,i,n){$.get(t,function(t){var e=t.split(/\n/g);e.pop();for(var s=0;s<e.length;s++)e[s]=e[s].match(/\[([^\]]+)\]/)[1],n(e[s],s),i(e[s],s)},"text")}function extractInformation(t,i,n,e){$.get(t,function(t){var s=t.replace(/\n/g,"");(s=s.split(/\[([^\]]+)\]/)).shift();for(var l=0;l<s.length;l++)s.splice(l,1);s=n(s),e(s,i)},"text")}function createAnimalList(t,i){$("#list div:nth-child("+(i+1)+")").append("<img src="+t[9][0]+' info="" onclick="">'),$("#list div:nth-child("+(i+1)+") img").attr("info",JSON.stringify(t)),$("#list div:nth-child("+(i+1)+") img").attr("onclick","switchAnimal("+(i+1)+", JSON.parse($(this).attr('info')), this)"),hash=location.hash.slice(1),hash==i&&(window.location.hash=0,$("#list div:nth-child("+(i+1)+") img").click())}function createPower(t,i){points=[[[250,180],[183,228],[209,307],[291,307],[317,228]],[[250,160],[164,222],[197,323],[303,323],[336,222]],[[250,140],[145,216],[185,339],[315,339],[355,216]],[[250,120],[126,210],[174,355],[326,355],[374,210]],[[250,100],[107,204],[162,371],[338,371],[393,204]],[[250,80],[88,197],[150,388],[350,388],[412,197]],[[250,60],[69,191],[138,404],[362,404],[431,191]],[[250,40],[50,185],[127,420],[373,420],[450,185]],[[250,20],[31,179],[115,436],[385,436],[469,179]],[[250,0],[12,173],[103,452],[397,452],[488,173]]],$("#text div:nth-child(4) div:nth-child("+i+")").append("<h1>"+t[0]+"</h1><p>"+t[1]+"</p>"),polygons="";for(var n=0;n<points.length;n++){polygon="<polygon points='";for(var e=0;e<points[n].length;e++)polygon+=" "+String(points[n][e][0])+","+String(points[n][e][1]);polygon+="' style='fill:none;stroke:#ccc'></polygon>",polygons+=polygon}data="<polygon points='";for(var s=2;s<7;s++)n=parseInt(t[s])-1,e=points[n][s-2],data+=" "+String(e[0])+","+String(e[1]);data+="' style='fill:#FF8F32;stroke:#FF8F32;fill-opacity:0.4'></polygon>",labels="<text x='218' y='16'>Strength</text><text x='0' y='189'>Stealth</text><text x='78' y='468'>Shield</text><text x='378' y='468'>Style</text><text x='428' y='189'>Situation</text>",$("#text div:nth-child(4) div:nth-child("+i+")").append("<svg width='100%' style='width:100%;font:16px sans-serif;fill:#FF8F32' viewbox='0 0 500 500'>"+polygons+data+labels+"</svg>"),$("#text div:nth-child(4) div:nth-child("+i+")").append("<p>HBA Rating: "+t[7]+"</p>")}function switchAnimal(t,i,n){if(location.hash.slice(1)!=t-1){window.location.hash=t-1,switchActive(n,"#list div img"),$("#images").html("<i class='fas fa-angle-double-right fa-2x' onclick='nextImage()'></i>"),switchActive($("#tab i:first-child"),"#tab i"),switchActive("#text div:nth-child(1)","#text div"),i[9].shift();for(var e=0;e<i[9].length;e++)0==e?$("#images").append("<img src='"+i[9][e]+"' class='show'>"):$("#images").append("<img src='"+i[9][e]+"' class='hide'>");$("#name").html("<h1>"+i[0]+"</h1><p>"+i[1]+"</p>"),$("#text div:nth-child(1)").html(i[5]),$("#text div:nth-child(2)").html(i[6]),$("#text div:nth-child(3)").html(i[7]),$("#text div:nth-child(4)").html(""),$("#text div:nth-child(5)").html(i[8]);for(e=0;e<i[4].length;e++)$("#text div:nth-child(4)").append("<div class='power'></div>"),extractInformation(i[4][e],e+1,function(t){return t},function(t,i){createPower(t,i)});$("document").attr("title",i[0])}}function nextImage(){for(var t=$("#images img").length,i=0,n=0;n<t;n++)if($("#images img:nth-of-type("+(n+1)+")").hasClass("show")){i=n+1;break}$("#images img:nth-of-type("+i+")").attr("class","hide"),i<t?$("#images img:nth-of-type("+(i+1)+")").attr("class","show"):$("#images img:nth-of-type(1)").attr("class","show")}function switchActive(t,i){$(i).removeClass("active"),$(t).addClass("active")}function toggle(t){$(t).hasClass("open")?$(t).addClass("close").removeClass("open"):$(t).addClass("open").removeClass("close")}function openFilter(t){0!=t?$("#filters div:nth-of-type("+t+")").hasClass("open")?$("#filters div").removeClass("open"):($("#filters div").removeClass("open"),$("#filters div:nth-of-type("+t+")").removeClass("close").addClass("open")):$("#filters div").removeClass("open").addClass("close")}function sort(t){if(1==t)for(var i=1;i<$("#list div").length;i++)$("#list div[number="+i+"]").appendTo("#list");else for(i=$("#list div").length;i>0;i--)$("#list div[number="+i+"]").appendTo("#list")}function filter(t){for(var i=1;i<$("#list div").length;i++)info=JSON.parse($("#list div:nth-child("+(i+1)+") img").attr("info")),animal=JSON.stringify(info[2]),animal.includes(JSON.stringify(t))?$("#list div:nth-child("+(i+1)+")").removeClass("hidden"):$("#list div:nth-child("+(i+1)+")").addClass("hidden")}function reset(){$("#list div").removeClass("hidden")}$(window).width()>=720&&layout("computer"),0==location.hash.length&&$("#images").html("<img src='/images/other_creatures/question_mark.jpg' class='show'>"),getSources("/animaldata/list.txt",function(t,i){extractInformation(t,i+1,function(t){return t[2]=t[2].split(", "),t[9]=t[9].split("-"),t[9].shift(),t[4]=t[4].split("-"),t[4].shift(),t},function(t,i){createAnimalList(t,i)})},function(t,i){$("#list").append("<div number='"+(i+1)+"'></div>")});
